# TimeLine

- [x] 框架
  - [x] config文件的创建和读取
  - [x] 读取照片
    - [x] 找到两个数据集中相同的照片
    - [x] 根据照片名字得到car pose和camera pose
    - [x] 设置内参矩阵
    - [x] 按顺序读取某一个record的照片
    - [x] 返回函数：返回一个字典(包含camera pose, 是否有car pose，id, rgb图, 深度图等信息)
  - [x] 创建多个线程
- [ ] 优化线程
  - [ ] theseus图优化数据结构
  - [ ] theseus图优化计算函数 

# 环境配置

```shell
# 基本环境
pip install cython # 安装apollo数据集自带的库需要用到(在car_instance文件夹中安装)
# 安装apollo数据集的c++库需要sudo,如果和当前conda环境不一致需要用如下命令安装
sudo -E env "PATH=$PATH" bash install.sh
conda install pytorch torchvision torchaudio pytorch-cuda=11.8 -c pytorch -c nvidia
pip install numpy scipy matplotlib 
pip install opencv-python

# 安装theseus
## 安装前置库Dispenso,OpenBLAS,BaSpaCho
## 都只用sudo make install安装即可
## 从git官网下载最新版本theseus
git clone https://github.com/facebookresearch/theseus.git && cd theseus
BASPACHO_ROOT_DIR=/home/yang/3rdLibrary/baspacho pip install -e .
```



# 运行

```
python slam_system.py --config ./configs/apollo.yaml
```

# Debug

- 创建launch.json

  ```json
  {
      // Use IntelliSense to learn about possible attributes.
      // Hover to view descriptions of existing attributes.
      // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
      "version": "0.2.0",
      "configurations": [
          {
              "name": "Python: Current File",
              "type": "python",
              "request": "launch",
              "program": "${file}",
              "console": "integratedTerminal",
              "justMyCode": true,
              "args": [
                  "--config","./configs/apollo.yaml"
              ]
          }
      ]
  }
  ```

- 对主文件slam_system.py进行debug
